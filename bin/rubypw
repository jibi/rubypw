#!/usr/bin/ruby

#
#            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE
#                    Version 2, December 2004
#
#            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE
#   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
#
#  0. You just DO WHAT THE FUCK YOU WANT TO.
#

require 'rubypw'

if ARGV[0].nil?
abort <<eos
You need to specify an action.
This is RubyPw.
Usage:
	add  [user]: add user password
	file [file]: import users/passwords from file
	get  [user]: get user password
	upd  [user]: update user password
	del  [user]: del user password
	list:        list users

	gen  [size]: generate a random password of [size] chars
	dump [file]: dump your db as a qrcode to [file]
eos
end

fail 'Invalid action' if !(%w(add file get upd del list gen dump).include? ARGV[0])
fail 'No user specified' if (%w(add get upd del).include? ARGV[0]) && ARGV[1].nil?
fail 'No file specified' if (%w(file).include? ARGV[0]) && ARGV[1].nil?

RubyPw::Manager.start ARGV

